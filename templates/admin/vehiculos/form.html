{% extends "layouts/base.html" %}
{% block title %}{{ 'Editar vehículo' if vehiculo else 'Nuevo vehículo' }} - Rust-Eze{% endblock %}

{% block content %}
<div class="container fade-in-up">

    <section class="hero-shell">
        <span class="hero-chip">
            <i class="fa-solid fa-garage-car"></i>
            Vehículos
        </span>
        <h2 class="hero-title">
            {{ 'Editar' if vehiculo else 'Registrar' }}
            <span class="hero-gradient">Vehículo</span>
        </h2>
        <p class="hero-subtitle">
            Completa los datos del vehículo, incluyendo su imagen y estado actual.
        </p>
    </section>

    <div class="card">
        <div class="card-header">
            {{ 'Edición de vehículo' if vehiculo else 'Alta de vehículo' }}
        </div>
        <div class="card-body">
            <form method="POST">
                <div class="row g-3">
                    <div class="col-md-4">
                        <label class="form-label">Marca</label>
                        <input class="form-control"
                               name="marca"
                               value="{{ vehiculo.marca if vehiculo else '' }}"
                               required>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Modelo</label>
                        <input class="form-control"
                               name="modelo"
                               value="{{ vehiculo.modelo if vehiculo else '' }}"
                               required>
                    </div>

                    <div class="col-md-2">
                        <label class="form-label">Año</label>
                        <input class="form-control"
                               type="number"
                               name="anio"
                               min="2000"
                               max="{{ (now().year + 1) if now else 2030 }}"
                               value="{{ vehiculo.anio if vehiculo else '' }}"
                               required>
                    </div>

                    <div class="col-md-2">
                        <label class="form-label">Precio</label>
                        <input class="form-control"
                               type="number"
                               step="0.01"
                               name="precio"
                               value="{{ vehiculo.precio if vehiculo else '' }}"
                               required>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Color</label>
                        <input class="form-control"
                               name="color"
                               value="{{ vehiculo.color if vehiculo else '' }}"
                               required>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Tipo</label>
                        <input class="form-control"
                               name="tipo"
                               value="{{ vehiculo.tipo if vehiculo else '' }}"
                               placeholder="Sedan, SUV, Deportivo..."
                               required>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Estado</label>
                        {% set ed = vehiculo.estado_disponibilidad if vehiculo else 'Disponible' %}
                        <select class="form-select" name="estado_disponibilidad">
                            <option value="Disponible" {{ 'selected' if ed == 'Disponible' else '' }}>Disponible</option>
                            <option value="Vendido" {{ 'selected' if ed == 'Vendido' else '' }}>Vendido</option>
                            <option value="Reservado" {{ 'selected' if ed == 'Reservado' else '' }}>Reservado</option>
                            <option value="Mantenimiento" {{ 'selected' if ed == 'Mantenimiento' else '' }}>Mantenimiento</option>
                        </select>
                    </div>

                    <div class="col-md-12">
                        <label class="form-label">URL de imagen</label>
                        <input class="form-control"
                               name="imagen_url"
                               value="{{ vehiculo.imagen_url if vehiculo else '' }}"
                               placeholder="/static/images/vehicles/tu_auto.jpg">
                        <div class="form-text text-muted">
                            Recomendado: usar rutas dentro de /static/images/vehicles/
                        </div>
                    </div>

                    <div class="col-md-12">
                        <label class="form-label">Descripción</label>
                        <textarea class="form-control"
                                  name="descripcion"
                                  rows="4">{{ vehiculo.descripcion if vehiculo else '' }}</textarea>
                    </div>
                </div>

                <div class="d-flex gap-2 mt-4">
                    <button class="btn btn-primary">
                        <i class="fa-solid fa-floppy-disk me-1"></i>
                        Guardar
                    </button>
                    <a class="btn btn-outline-light"
                       href="{{ url_for('admin.vehiculos_list') }}">
                        Volver
                    </a>
                </div>
            </form>
        </div>
    </div>

</div>
{% endblock %}
