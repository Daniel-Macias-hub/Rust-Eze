{% extends "layouts/base.html" %}
{% block title %}{{ 'Editar empleado' if empleado else 'Nuevo empleado' }} - Rust-Eze{% endblock %}

{% block content %}
<div class="container fade-in-up">

    <section class="hero-shell">
        <span class="hero-chip">
            <i class="fa-solid fa-briefcase"></i>
            Empleados
        </span>
        <h2 class="hero-title">
            {{ 'Editar' if empleado else 'Registrar' }}
            <span class="hero-gradient">Empleado</span>
        </h2>
        <p class="hero-subtitle">
            Configura puesto, estado y permisos administrativos.
        </p>
    </section>

    <div class="card">
        <div class="card-header">
            {{ 'Edición de empleado' if empleado else 'Alta de empleado' }}
        </div>
        <div class="card-body">
            <form method="POST">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Nombre completo</label>
                        <input class="form-control"
                               name="nombre_completo"
                               value="{{ empleado.nombre_completo if empleado else '' }}"
                               required>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">Correo electrónico</label>
                        <input class="form-control"
                               type="email"
                               name="email"
                               value="{{ empleado.email if empleado else '' }}"
                               required>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Puesto</label>
                        {% set p = empleado.puesto if empleado else 'Vendedor' %}
                        <select class="form-select" name="puesto" required>
                            <option value="Gerente" {{ 'selected' if p == 'Gerente' else '' }}>Gerente</option>
                            <option value="Vendedor" {{ 'selected' if p == 'Vendedor' else '' }}>Vendedor</option>
                            <option value="Administrativo" {{ 'selected' if p == 'Administrativo' else '' }}>Administrativo</option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Administrador</label>
                        {% set ea = empleado.es_administrador if empleado else 0 %}
                        <select class="form-select" name="es_administrador">
                            <option value="1" {{ 'selected' if ea else '' }}>Sí</option>
                            <option value="0" {{ 'selected' if not ea else '' }}>No</option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Estado</label>
                        {% set act = empleado.activo if empleado else 1 %}
                        <select class="form-select" name="activo">
                            <option value="1" {{ 'selected' if act else '' }}>Activo</option>
                            <option value="0" {{ 'selected' if not act else '' }}>Inactivo</option>
                        </select>
                    </div>

                    {% if not empleado %}
                    <div class="col-md-6">
                        <label class="form-label">Contraseña inicial</label>
                        <input class="form-control"
                               type="password"
                               name="password"
                               placeholder="••••••••"
                               required>
                    </div>
                    {% else %}
                    <div class="col-md-6">
                        <label class="form-label">Nueva contraseña (opcional)</label>
                        <input class="form-control"
                               type="password"
                               name="password"
                               placeholder="Dejar vacío para no cambiar">
                    </div>
                    {% endif %}
                </div>

                <div class="d-flex gap-2 mt-4">
                    <button class="btn btn-primary">
                        <i class="fa-solid fa-floppy-disk me-1"></i>
                        Guardar
                    </button>
                    <a class="btn btn-outline-light"
                       href="{{ url_for('admin.empleados_list') }}">
                        Volver
                    </a>
                </div>
            </form>
        </div>
    </div>

</div>
{% endblock %}
