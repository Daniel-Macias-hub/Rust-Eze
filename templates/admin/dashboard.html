{% extends "layouts/base.html" %}
{% block title %}Panel de Administración - Rust-Eze{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>Panel de Administración</h2>

  <div class="row mt-3">
    <div class="col-md-3">
      <div class="card text-center">
        <div class="card-body">
          <h5 class="card-title">Vehículos</h5>
          <p class="display-6">{{ stats.vehiculos }}</p>
          <a href="{{ url_for('admin.vehiculos_list') }}" class="btn btn-sm btn-primary">Gestionar</a>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card text-center">
        <div class="card-body">
          <h5 class="card-title">Clientes activos</h5>
          <p class="display-6">{{ stats.clientes }}</p>
          <a href="{{ url_for('admin.clientes_list') }}" class="btn btn-sm btn-primary">Gestionar</a>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card text-center">
        <div class="card-body">
          <h5 class="card-title">Empleados</h5>
          <p class="display-6">{{ stats.empleados }}</p>
          <a href="{{ url_for('admin.empleados_list') }}" class="btn btn-sm btn-primary">Gestionar</a>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card text-center">
        <div class="card-body">
          <h5 class="card-title">Ventas</h5>
          <p class="display-6">{{ stats.ventas }}</p>
          <a href="{{ url_for('admin.ventas_list') }}" class="btn btn-sm btn-primary">Ver ventas</a>
        </div>
      </div>
    </div>
  </div>

  <h4 class="mt-4">Ventas recientes</h4>
  <div class="table-responsive">
    <table class="table table-sm table-striped">
      <thead>
        <tr>
          <th>#</th>
          <th>Fecha</th>
          <th>Cliente</th>
          <th>Empleado</th>
          <th>Total</th>
          <th>Estado</th>
        </tr>
      </thead>
      <tbody>
      {% for v in ventas_recientes %}
        <tr>
          <td>{{ v.venta_id }}</td>
          <td>{{ v.fecha_venta }}</td>
          <td>{{ v.cliente }}</td>
          <td>{{ v.empleado }}</td>
          <td>{{ format_currency(v.total_venta) }}</td>
          <td>{{ v.estado_venta }}</td>
        </tr>
      {% else %}
        <tr>
          <td colspan="6" class="text-muted">No hay ventas registradas.</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
